@using GestorTeocratico.Entities
@using GestorTeocratico.Shared.Enums
@inject DialogService DialogService

<PageTitle>Detalles del Publicador</PageTitle>
<RadzenCard Style="min-width:400px; max-width:600px; box-shadow: 0 4px 24px rgba(0,0,0,0.12); border-radius: 16px;">
    <div class="mb-4">
        <h3 class="fw-bold text-primary" style="margin-bottom: 0.5rem;">Detalles del Publicador</h3>
        <hr />
    </div>
    <RadzenFieldset Style="border:none; padding:0;">
        <div class="row gy-3">
            <div class="col-5 text-secondary">Nombre:</div>
            <div class="col-7 fw-semibold">@publisher.FirstName</div>
            <div class="col-5 text-secondary">Apellido:</div>
            <div class="col-7">@publisher.LastName</div>
            <div class="col-5 text-secondary">Apellido Materno:</div>
            <div class="col-7">@publisher.MotherLastName</div>
            <div class="col-5 text-secondary">Teléfono:</div>
            <div class="col-7">@publisher.Phone</div>
            <div class="col-5 text-secondary">Correo Electrónico:</div>
            <div class="col-7">@publisher.Email</div>
            <div class="col-5 text-secondary">Género:</div>
            <div class="col-7">@GetGenderDisplayName(publisher.Gender)</div>
            <div class="col-5 text-secondary">Privilegio:</div>
            <div class="col-7">@GetPrivilegeDisplayName(publisher.Privilege)</div>
            <div class="col-5 text-secondary">Responsabilidades:</div>
            <div class="col-7">
                @if (publisher.PublisherResponsibilities?.Any() == true)
                {
                    <span>@string.Join(", ", publisher.PublisherResponsibilities.Select(pr => pr.Responsibility.Name))</span>
                }
                else
                {
                    <span class="text-muted">Sin responsabilidades</span>
                }
            </div>
            <div class="col-5 text-secondary">Departamentos:</div>
            <div class="col-7">
                @if (publisher.ResponsibleDepartments?.Any() == true)
                {
                    <span>@string.Join(", ", publisher.ResponsibleDepartments.Select(d => d.Name))</span>
                }
                else
                {
                    <span class="text-muted">Sin departamentos</span>
                }
            </div>
        </div>
    </RadzenFieldset>
    <div class="d-flex justify-content-end mt-4">
        <RadzenButton Text="Cerrar" Icon="close" ButtonStyle="ButtonStyle.Secondary" Style="min-width: 120px;" Click="@Close" />
    </div>
</RadzenCard>

@code {
    [Parameter] public Publisher publisher { get; set; } = new();

    private void Close()
    {
        DialogService.Close();
    }

    private string GetGenderDisplayName(Gender gender)
    {
        return gender switch
        {
            Gender.Male => "Masculino",
            Gender.Female => "Femenino",
            _ => gender.ToString()
        };
    }

    private string GetPrivilegeDisplayName(Privilege? privilege)
    {
        if (!privilege.HasValue) return "Sin privilegio";
        return privilege.Value switch
        {
            Privilege.Elder => "Anciano",
            Privilege.MinisterialServant => "Siervo Ministerial",
            Privilege.Pioneer => "Precursor",
            _ => privilege.Value.ToString()
        };
    }
}

